/* Police Death Star - Chargée pour tous les visiteurs */
@font-face{
  font-family: "Death Star";
  src: url("../assets/fonts/DeathStar.woff2") format("woff2");
  font-weight: 400;
  font-style: normal;
  font-display: swap;
}

*{ box-sizing:border-box; }
html,body{ height:100%; }
body{
  margin:0;
  background: linear-gradient(180deg, #140a2e, var(--bg0));
  color:var(--text);
  font-family:var(--font-ui);
  overflow:hidden;
}
a{ color:inherit; text-decoration:none; }
button,input,textarea{ font:inherit; color:inherit; }
::selection{ background: rgba(160,90,255,.35); }

.game{
  position:relative;
  height:100vh;
  width:100vw;
  overflow:hidden;
}

/* BACKDROP = fond de scène */
.backdrop{
  position: fixed;
  inset: 0;
  z-index: 0;
  background-image: var(--bg-img);
  background-size: cover;
  background-position: center;
  background-repeat: no-repeat;
}

/* le jeu au-dessus du fond */
.game{ position: relative; z-index: 1; }

/* fallback si bg pas set */
#app:not([data-ready="1"]) .backdrop{
  background:
    radial-gradient(900px 450px at 50% 10%, rgba(120,205,255,.18), transparent 60%),
    radial-gradient(900px 450px at 30% 30%, rgba(195,120,255,.16), transparent 70%),
    linear-gradient(180deg, rgba(20,10,46,.45), rgba(7,7,22,.55));
}

/* Overlay pour les étoiles (par-dessus l'image de fond) */
.stars-overlay {
  position: fixed;
  inset: 0;
  z-index: 3;
  pointer-events: none;
  background: 
    /* Voie lactée subtile */
    linear-gradient(135deg, 
      transparent 20%, 
      rgba(195, 120, 255, 0.15) 40%,
      rgba(120, 205, 255, 0.18) 50%,
      rgba(195, 120, 255, 0.15) 60%,
      transparent 80%
    ),
    /* Nébuleuses lumineuses */
    radial-gradient(ellipse 1000px 500px at 15% 25%, rgba(195, 120, 255, 0.35), transparent 60%),
    radial-gradient(ellipse 800px 600px at 85% 65%, rgba(120, 205, 255, 0.30), transparent 60%),
    radial-gradient(circle 600px at 50% 85%, rgba(180, 100, 255, 0.25), transparent 65%),
    /* Nébuleuses secondaires */
    radial-gradient(ellipse 400px 300px at 70% 20%, rgba(255, 180, 255, 0.20), transparent 70%),
    radial-gradient(ellipse 500px 400px at 30% 75%, rgba(100, 220, 255, 0.18), transparent 65%);
  animation: nebulaFloat 30s ease-in-out infinite;
}

/* Particules d'étoiles en CSS pur */
.stars-overlay::before,
.stars-overlay::after {
  content: '';
  position: absolute;
  top: 0;
  left: 0;
  width: 4px;
  height: 4px;
  background: rgba(255, 255, 255, 1);
  border-radius: 50%;
  box-shadow:
    /* GROUPE 1 - Grosses étoiles brillantes */
    10vw 20vh 2px 1px rgba(255,255,255,1),
    85vw 15vh 2px 1px rgba(255,255,255,0.95),
    45vw 8vh 3px 1px rgba(255,255,255,1),
    75vw 35vh 2px 0px rgba(255,255,255,0.9),
    20vw 60vh 2px 1px rgba(255,255,255,1),
    90vw 50vh 3px 1px rgba(255,255,255,1),
    55vw 75vh 2px 0px rgba(255,255,255,0.95),
    30vw 90vh 2px 0px rgba(255,255,255,0.9),
    
    /* GROUPE 2 - Étoiles moyennes */
    15vw 45vh 1px 0px rgba(255,255,255,0.8),
    60vw 25vh 1px 0px rgba(255,255,255,0.85),
    35vw 55vh 2px 1px rgba(255,255,255,0.9),
    80vw 70vh 1px 0px rgba(255,255,255,0.8),
    5vw 80vh 1px 0px rgba(255,255,255,0.85),
    95vw 30vh 1px 0px rgba(255,255,255,0.75),
    50vw 40vh 1px 0px rgba(255,255,255,0.9),
    70vw 60vh 2px 0px rgba(255,255,255,0.95),
    
    /* GROUPE 3 - Petites étoiles */
    3vw 10vh 1px 0px rgba(255,255,255,0.7),
    22vw 15vh 1px 0px rgba(255,255,255,0.6),
    41vw 22vh 1px 0px rgba(255,255,255,0.75),
    67vw 18vh 1px 0px rgba(255,255,255,0.65),
    88vw 25vh 1px 0px rgba(255,255,255,0.7),
    12vw 35vh 1px 0px rgba(255,255,255,0.65),
    28vw 42vh 1px 0px rgba(255,255,255,0.7),
    54vw 48vh 1px 0px rgba(255,255,255,0.75),
    73vw 38vh 1px 0px rgba(255,255,255,0.6),
    94vw 45vh 1px 0px rgba(255,255,255,0.7),
    
    /* GROUPE 4 - Plus de petites */
    7vw 55vh 1px 0px rgba(255,255,255,0.65),
    26vw 62vh 1px 0px rgba(255,255,255,0.7),
    48vw 58vh 1px 0px rgba(255,255,255,0.6),
    66vw 66vh 1px 0px rgba(255,255,255,0.75),
    84vw 72vh 1px 0px rgba(255,255,255,0.65),
    17vw 78vh 1px 0px rgba(255,255,255,0.7),
    37vw 85vh 1px 0px rgba(255,255,255,0.65),
    59vw 82vh 1px 0px rgba(255,255,255,0.7),
    81vw 88vh 1px 0px rgba(255,255,255,0.75),
    
    /* GROUPE 5*/
    4vw 5vh 1px 0px rgba(255,255,255,0.6),
    14vw 12vh 1px 0px rgba(255,255,255,0.65),
    33vw 5vh 1px 0px rgba(255,255,255,0.7),
    52vw 11vh 1px 0px rgba(255,255,255,0.6),
    71vw 7vh 1px 0px rgba(255,255,255,0.65),
    91vw 13vh 1px 0px rgba(255,255,255,0.7);
  animation: twinkle 4s ease-in-out infinite;
}

.stars-overlay::after {
  box-shadow:
    /* GROUPE 6 - Décalées pour densité */
    25vw 12vh 1px 0px rgba(255,255,255,0.8),
    65vw 18vh 1px 0px rgba(255,255,255,0.85),
    40vw 28vh 2px 0px rgba(255,255,255,0.9),
    82vw 42vh 1px 0px rgba(255,255,255,0.75),
    12vw 65vh 1px 0px rgba(255,255,255,0.85),
    88vw 55vh 2px 1px rgba(255,255,255,0.8),
    48vw 78vh 1px 0px rgba(255,255,255,0.9),
    72vw 88vh 2px 0px rgba(255,255,255,1),
    
    /* GROUPE 7 */
    8vw 35vh 1px 0px rgba(255,255,255,0.75),
    58vw 48vh 1px 0px rgba(255,255,255,0.85),
    92vw 22vh 1px 0px rgba(255,255,255,0.7),
    38vw 68vh 1px 0px rgba(255,255,255,0.9),
    78vw 82vh 2px 1px rgba(255,255,255,0.85),
    18vw 52vh 1px 0px rgba(255,255,255,0.8),
    52vw 15vh 1px 0px rgba(255,255,255,0.9),
    68vw 72vh 1px 0px rgba(255,255,255,0.85),
    
    /* GROUPE 8 - Petites dispersées */
    11vw 27vh 1px 0px rgba(255,255,255,0.6),
    31vw 33vh 1px 0px rgba(255,255,255,0.65),
    46vw 37vh 1px 0px rgba(255,255,255,0.7),
    63vw 43vh 1px 0px rgba(255,255,255,0.6),
    77vw 47vh 1px 0px rgba(255,255,255,0.65),
    89vw 53vh 1px 0px rgba(255,255,255,0.7),
    
    /* GROUPE 9 */
    9vw 63vh 1px 0px rgba(255,255,255,0.65),
    24vw 69vh 1px 0px rgba(255,255,255,0.7),
    42vw 74vh 1px 0px rgba(255,255,255,0.65),
    61vw 79vh 1px 0px rgba(255,255,255,0.7),
    76vw 84vh 1px 0px rgba(255,255,255,0.75),
    93vw 91vh 1px 0px rgba(255,255,255,0.65),
    
    /* GROUPE 10 - Extras en haut */
    6vw 3vh 1px 0px rgba(255,255,255,0.7),
    19vw 8vh 1px 0px rgba(255,255,255,0.65),
    36vw 4vh 1px 0px rgba(255,255,255,0.75),
    56vw 9vh 1px 0px rgba(255,255,255,0.7),
    74vw 6vh 1px 0px rgba(255,255,255,0.65),
    87vw 11vh 1px 0px rgba(255,255,255,0.7),
    96vw 8vh 1px 0px rgba(255,255,255,0.75),
    
    /* GROUPE 11 - Milieu gauche */
    2vw 23vh 1px 0px rgba(255,255,255,0.65),
    13vw 29vh 1px 0px rgba(255,255,255,0.7),
    21vw 36vh 1px 0px rgba(255,255,255,0.65),
    
    /* GROUPE 12 - Milieu droite */
    79vw 27vh 1px 0px rgba(255,255,255,0.7),
    86vw 33vh 1px 0px rgba(255,255,255,0.65),
    97vw 39vh 1px 0px rgba(255,255,255,0.7);
  animation: twinkle 3.5s ease-in-out infinite 0.7s;
}

.scene{
  position:relative;
  z-index:2;
  height:100%;
  width:100%;
  display:flex;
  align-items:center;
  justify-content:center;
  padding: clamp(16px, 4vw, 42px);
  will-change: transform, opacity, filter;
}

.container{
  width:min(var(--maxw), 100%);
  position:relative;
}

.hidden{ display:none !important; }

/* PLANETE + ASTRO */
.planetWrap{
  position:absolute;
  left:50%;
  bottom:-3vh;
  transform: translateX(-50%);
  width: min(1500px, 120vw);
  z-index:1;
  pointer-events:none;
}

.planet{
  width:100%;
  height:auto;
  display:block;
  filter: drop-shadow(0 0 40px rgba(120,205,255,.35));
}

.astro{
  position:absolute;
  left:50%;
  bottom: 49%;
  transform: translateX(-50%);
  width: clamp(100px, 13vw, 160px);
  height:auto;
  display:block;
  filter: drop-shadow(0 18px 25px rgba(0,0,0,.45));
}
.astroFx{
  position:absolute;    /* important */
  left:50%;
  bottom:49%;
  transform: translateX(-50%);  /* base */
  animation: astroFloat 8s ease-in-out infinite;
  will-change: transform;
}

/* img astro devient simplement "contenu" */
.astro{
  position: relative;
  left:auto;
  bottom:auto;
  transform:none;
}
